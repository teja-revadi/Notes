{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import{useNavigate}from'react-router-dom';import{ReactComponent as ArrowLeft}from'../assets/arrow-left.svg';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const NotePage=_ref=>{let{match,history}=_ref;const{id}=useParams();const navigate=useNavigate();let[note,setNote]=useState(null);useEffect(()=>{getNote();},[id]);let getNote=async()=>{if(id==='new')return;let response=await fetch(\"/api/notes/\".concat(id,\"/\"));let data=await response.json();setNote(data);};let createNote=async()=>{fetch(\"/api/notes/create\",{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify(note)});};let updateNote=async()=>{fetch(\"/api/notes/\".concat(id,\"/update\"),{method:\"PUT\",headers:{'Content-Type':'application/json'},body:JSON.stringify(note)});};let deleteNote=async()=>{fetch(\"/api/notes/\".concat(id,\"/delete\"),{method:\"DELETE\",headers:{'Content-Type':'application/json'}});navigate('/');};let handleSubmit=()=>{if(id!=='new'&&note.body==\"\"){deleteNote();}else if(id!=='new'){updateNote();}else if(id==='new'&&note!==null){createNote();}navigate('/');};return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(ArrowLeft,{onClick:handleSubmit})}),id!=='new'?/*#__PURE__*/_jsx(\"button\",{onClick:deleteNote,children:\"Delete\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Done\"})]}),/*#__PURE__*/_jsx(\"textarea\",{onChange:e=>{setNote({...note,'body':e.target.value});},value:note===null||note===void 0?void 0:note.body})]});};export default NotePage;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","ReactComponent","ArrowLeft","jsx","_jsx","jsxs","_jsxs","NotePage","_ref","match","history","id","navigate","note","setNote","getNote","response","fetch","concat","data","json","createNote","method","headers","body","JSON","stringify","updateNote","deleteNote","handleSubmit","className","children","onClick","onChange","e","target","value"],"sources":["/Users/teja/Desktop/react_django/notes_frontend/src/pages/NotePage.js"],"sourcesContent":["import React, {useState,useEffect} from 'react'\nimport { useParams} from 'react-router-dom'\nimport { useNavigate } from 'react-router-dom'\nimport {ReactComponent as ArrowLeft} from '../assets/arrow-left.svg'\n\nconst NotePage = ({ match, history }) => {\n    const { id } = useParams();\n    const navigate = useNavigate();\n    let [note,setNote] = useState(null) \n\nuseEffect(() =>{\n  getNote();\n  },[id]);\n    \nlet getNote = async () => {\n  if(id==='new') return\nlet response = await fetch(`/api/notes/${id}/`)\nlet data = await response.json()\nsetNote(data)\n}\nlet createNote = async () => {\n    fetch(`/api/notes/create`,{\n      method: \"POST\",\n      headers: {\n          'Content-Type':'application/json'\n            },\n        body: JSON.stringify(note)\n    })\n}\n\nlet updateNote = async () => {\n    fetch(`/api/notes/${id}/update`,{\n      method: \"PUT\",\n      headers: {\n          'Content-Type':'application/json'\n            },\n        body: JSON.stringify(note)\n    })\n}\n\n\nlet deleteNote = async () => {\n  fetch(`/api/notes/${id}/delete`,{\n    method: \"DELETE\",\n    headers: {\n        'Content-Type':'application/json'\n          },       \n  })\n  navigate('/')\n}\n\n  let handleSubmit = () => {\n    if(id !== 'new' && note.body ==\"\"){\n      deleteNote()\n    }else if(id !== 'new'){\n    updateNote()\n    }else if(id === 'new' && note!== null){\n      createNote()\n      }\n    navigate('/')\n  }\n\n\n  return (\n    <div className='note'>\n      <div className='note-header'>\n        <h3>\n          <ArrowLeft onClick={handleSubmit}/>\n          </h3>\n          {id !== 'new'?(<button onClick={deleteNote}>Delete</button>):\n          (<button onClick={handleSubmit}>Done</button>)}\n          \n      </div>\n        <textarea onChange={(e) =>{setNote({...note, 'body':e.target.value})}} value={note?.body}></textarea>\n    </div>\n  )\n  }\n\nexport default NotePage"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}